{"ast":null,"code":"var _s = $RefreshSig$();\nimport { useState } from \"react\";\nimport useAuthContext from './useAuthContext';\nconst useSignup = () => {\n  _s();\n  const [error, setError] = useState(null);\n  const [success, setSuccess] = useState(null);\n  const [isLoading, setIsLoading] = useState(null);\n  const {\n    dispatch\n  } = useAuthContext();\n  const signup = async (name, email, username, password, bio, skills, interests, location) => {\n    setIsLoading(true);\n    setError(null);\n\n    // Prepare the body object with all the fields\n    const body = {\n      name,\n      email,\n      username,\n      password,\n      profile: {\n        bio,\n        skills,\n        // assumed to be an array from SignupPage\n        interests,\n        // assumed to be an array from SignupPage\n        location\n      }\n    };\n    try {\n      const response = await fetch('/api/user/signup', {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify(body)\n      });\n      const json = await response.json();\n      if (!response.ok) {\n        setIsLoading(false);\n        setError(json.error);\n      } else {\n        localStorage.setItem('user', JSON.stringify(json));\n        setSuccess('User has been created successfully');\n        dispatch({\n          type: 'LOGIN',\n          payload: json\n        });\n        setIsLoading(false);\n      }\n    } catch (err) {\n      setIsLoading(false);\n      setError('An unexpected error occurred. Please try again.');\n    }\n  };\n  return {\n    signup,\n    isLoading,\n    error,\n    success\n  };\n};\n_s(useSignup, \"V7qF6APYtcixPWPaAc4kM36XQx8=\", false, function () {\n  return [useAuthContext];\n});\nexport default useSignup;","map":{"version":3,"names":["useState","useAuthContext","useSignup","_s","error","setError","success","setSuccess","isLoading","setIsLoading","dispatch","signup","name","email","username","password","bio","skills","interests","location","body","profile","response","fetch","method","headers","JSON","stringify","json","ok","localStorage","setItem","type","payload","err"],"sources":["D:/projects/profilemanagement2/profile-management/client/src/hooks/useSignup.jsx"],"sourcesContent":["import { useState } from \"react\";\r\nimport useAuthContext from './useAuthContext';\r\n\r\nconst useSignup = () => {\r\n  const [error, setError] = useState(null);\r\n  const [success, setSuccess] = useState(null);\r\n  const [isLoading, setIsLoading] = useState(null);\r\n  const { dispatch } = useAuthContext();\r\n\r\n  const signup = async (name, email, username, password, bio, skills, interests, location) => {\r\n    setIsLoading(true);\r\n    setError(null);\r\n\r\n    // Prepare the body object with all the fields\r\n    const body = {\r\n      name,\r\n      email,\r\n      username,\r\n      password,\r\n      profile: {\r\n        bio,\r\n        skills,        // assumed to be an array from SignupPage\r\n        interests,     // assumed to be an array from SignupPage\r\n        location\r\n      }\r\n    };\r\n\r\n    try {\r\n      const response = await fetch('/api/user/signup', {\r\n        method: 'POST',\r\n        headers: { \"Content-Type\": \"application/json\" },\r\n        body: JSON.stringify(body)\r\n      });\r\n\r\n      const json = await response.json();\r\n\r\n      if (!response.ok) {\r\n        setIsLoading(false);\r\n        setError(json.error);\r\n      } else {\r\n        localStorage.setItem('user', JSON.stringify(json));\r\n        setSuccess('User has been created successfully');\r\n        dispatch({\r\n          type: 'LOGIN',\r\n          payload: json\r\n        });\r\n\r\n        setIsLoading(false);\r\n      }\r\n    } catch (err) {\r\n      setIsLoading(false);\r\n      setError('An unexpected error occurred. Please try again.');\r\n    }\r\n  };\r\n\r\n  return { signup, isLoading, error, success };\r\n};\r\n\r\nexport default useSignup;\r\n"],"mappings":";AAAA,SAASA,QAAQ,QAAQ,OAAO;AAChC,OAAOC,cAAc,MAAM,kBAAkB;AAE7C,MAAMC,SAAS,GAAGA,CAAA,KAAM;EAAAC,EAAA;EACtB,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGL,QAAQ,CAAC,IAAI,CAAC;EACxC,MAAM,CAACM,OAAO,EAAEC,UAAU,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EAC5C,MAAM,CAACQ,SAAS,EAAEC,YAAY,CAAC,GAAGT,QAAQ,CAAC,IAAI,CAAC;EAChD,MAAM;IAAEU;EAAS,CAAC,GAAGT,cAAc,CAAC,CAAC;EAErC,MAAMU,MAAM,GAAG,MAAAA,CAAOC,IAAI,EAAEC,KAAK,EAAEC,QAAQ,EAAEC,QAAQ,EAAEC,GAAG,EAAEC,MAAM,EAAEC,SAAS,EAAEC,QAAQ,KAAK;IAC1FV,YAAY,CAAC,IAAI,CAAC;IAClBJ,QAAQ,CAAC,IAAI,CAAC;;IAEd;IACA,MAAMe,IAAI,GAAG;MACXR,IAAI;MACJC,KAAK;MACLC,QAAQ;MACRC,QAAQ;MACRM,OAAO,EAAE;QACPL,GAAG;QACHC,MAAM;QAAS;QACfC,SAAS;QAAM;QACfC;MACF;IACF,CAAC;IAED,IAAI;MACF,MAAMG,QAAQ,GAAG,MAAMC,KAAK,CAAC,kBAAkB,EAAE;QAC/CC,MAAM,EAAE,MAAM;QACdC,OAAO,EAAE;UAAE,cAAc,EAAE;QAAmB,CAAC;QAC/CL,IAAI,EAAEM,IAAI,CAACC,SAAS,CAACP,IAAI;MAC3B,CAAC,CAAC;MAEF,MAAMQ,IAAI,GAAG,MAAMN,QAAQ,CAACM,IAAI,CAAC,CAAC;MAElC,IAAI,CAACN,QAAQ,CAACO,EAAE,EAAE;QAChBpB,YAAY,CAAC,KAAK,CAAC;QACnBJ,QAAQ,CAACuB,IAAI,CAACxB,KAAK,CAAC;MACtB,CAAC,MAAM;QACL0B,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEL,IAAI,CAACC,SAAS,CAACC,IAAI,CAAC,CAAC;QAClDrB,UAAU,CAAC,oCAAoC,CAAC;QAChDG,QAAQ,CAAC;UACPsB,IAAI,EAAE,OAAO;UACbC,OAAO,EAAEL;QACX,CAAC,CAAC;QAEFnB,YAAY,CAAC,KAAK,CAAC;MACrB;IACF,CAAC,CAAC,OAAOyB,GAAG,EAAE;MACZzB,YAAY,CAAC,KAAK,CAAC;MACnBJ,QAAQ,CAAC,iDAAiD,CAAC;IAC7D;EACF,CAAC;EAED,OAAO;IAAEM,MAAM;IAAEH,SAAS;IAAEJ,KAAK;IAAEE;EAAQ,CAAC;AAC9C,CAAC;AAACH,EAAA,CArDID,SAAS;EAAA,QAIQD,cAAc;AAAA;AAmDrC,eAAeC,SAAS"},"metadata":{},"sourceType":"module","externalDependencies":[]}